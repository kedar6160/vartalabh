{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","Provider","Chats","useContext","handleLogout","a","signOut","getFile","url","fetch","response","blob","data","File","type","axios","get","headers","process","email","uid","then","catch","formdata","FormData","append","photoURL","avatar","name","post","error","console","log","className","onClick","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","GoogleOutlined","App","style","fontFamily","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4LAIaA,G,MAAOC,IAASC,cAAe,CACxCC,OAAQ,0CACRC,WAAY,8BACZC,UAAW,cACXC,cAAe,0BACfC,kBAAmB,aACnBC,MAAO,0CACPC,cAAe,iBACdT,QCRCU,EAAcC,IAAMC,gBAIbC,EAAe,SAAH,GAAqB,IAAfC,EAAQ,EAARA,SAC3B,EAA+BC,oBAAS,GAAK,mBAArCC,EAAO,KAAEC,EAAU,KAC3B,EAAwBF,mBAAS,MAAK,mBAA/BG,EAAI,KAAEC,EAAO,KACdC,EAAUC,cAChBC,qBAAU,WACNtB,EAAKuB,oBAAmB,SAACL,GACrBC,EAAQD,GACRD,GAAW,GAERC,GAAME,EAAQI,KAAK,eAE3B,CAACN,EAAME,IAEV,IAAMK,EAAQ,CAACP,QAEf,OACC,kBAACR,EAAYgB,SAAQ,CAACD,MAAOA,IACxBT,GAAWF,I,iDCwDNa,EA1ED,WAEd,IAAMP,EAAUC,cACTH,EDJqBU,qBAAWlB,GCIhCQ,KACP,EAA8BH,oBAAS,GAAK,mBAArCC,EAAO,KAAEC,EAAU,KAGpBY,EAAY,uCAAG,sBAAAC,EAAA,sEACX9B,EAAK+B,UAAU,KAAD,EAEpBX,EAAQI,KAAK,KAAK,2CACrB,kBAJiB,mCAMZQ,EAAO,uCAAG,WAAOC,GAAG,yFACHC,MAAMD,GAAK,KAAD,EAAnB,OAARE,EAAQ,gBACKA,EAASC,OAAO,KAAD,EAAxB,OAAJC,EAAI,yBAEH,IAAIC,KAAK,CAACD,GAAO,gBAAiB,CAACE,KAAM,gBAAc,2CAC7D,gBALY,sCAsCb,OA/BAjB,qBAAU,WACNJ,EAKJsB,IAAMC,IAAI,qCAAsC,CAC5CC,QAAS,CACL,aAAcC,uCACd,YAAazB,EAAK0B,MAClB,cAAe1B,EAAK2B,OAEzBC,MAAK,WACJ7B,GAAW,MAEZ8B,OAAM,WACL,IAAIC,EAAW,IAAIC,SACnBD,EAASE,OAAO,QAAQhC,EAAK0B,OAC7BI,EAASE,OAAO,WAAYhC,EAAK0B,OACjCI,EAASE,OAAO,SAAUhC,EAAK2B,KAE/Bb,EAAQd,EAAKiC,UACRL,MAAK,SAACM,GACHJ,EAASE,OAAO,SAAUE,EAAQA,EAAOC,MACzCb,IAAMc,KAAK,kCAAmCN,EAC7C,CAACN,QAAQ,CAAC,cAAeC,0CACxBG,MAAK,kBAAK7B,GAAW,MACtB8B,OAAM,SAACQ,GAAK,OAAIC,QAAQC,IAAIF,YAxBrCnC,EAAQI,KAAK,OA2Bf,CAACN,EAAKE,KACJF,GAAQF,EAAgB,aAEpB,yBAAK0C,UAAU,cACX,yBAAKA,UAAU,WACX,yBAAKA,UAAU,YAAW,SAG1B,yBAAKC,QAAS9B,EAAc6B,UAAU,cAAa,WAIvD,kBAAC,IAAU,CACPE,OAAS,qBACTC,UAAalB,uCACbmB,SAAY5C,EAAK0B,MACjBmB,WAAc7C,EAAK2B,Q,SClDpBmB,EAjBD,WACV,OACI,yBAAKC,GAAG,cACJ,yBAAKA,GAAG,cACJ,4BAAI,qBACJ,yBAAKP,UAAU,sBACXC,QAAS,kBAAM3D,EAAKkE,mBAAmB,IAAIjE,IAASD,KAAKmE,sBACzD,kBAACC,EAAA,EAAc,MAAG,wBAGtB,6BAAM,IAAC,gCCORC,MAff,WACE,OACE,yBAAKC,MAAO,CAAEC,WAAY,WACxB,kBAAC,IAAM,KACL,kBAAC,EAAY,KACX,kBAAC,IAAM,KACL,kBAAC,IAAK,CAACC,KAAK,SAASC,UAAW9C,IAChC,kBAAC,IAAK,CAAC6C,KAAK,IAAIC,UAAWT,SCVvCU,IAASC,OACP,kBAAC,IAAMC,WAAU,KACf,kBAAC,EAAG,OAENC,SAASC,eAAe,U","file":"static/js/main.13a3f97c.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\n\r\nexport const auth = firebase.initializeApp ({\r\n    apiKey: \"AIzaSyDKfSKSSeU_-1E-ueEAxlPpaUpORUCxnjk\",\r\n    authDomain: \"msgme-71c3c.firebaseapp.com\",\r\n    projectId: \"msgme-71c3c\",\r\n    storageBucket: \"msgme-71c3c.appspot.com\",\r\n    messagingSenderId: \"7899748047\",\r\n    appId: \"1:7899748047:web:0da8a2f5fd4bc3402c49ba\",\r\n    measurementId: \"G-RQED55KGV1\"\r\n  }).auth();","import React, {useContext, useEffect, useState} from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { auth  } from '../firebase';\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport const useAuth = ()=> useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) =>{\r\n    const [ loading, setLoading] = useState(true);\r\n    const [user, setUser] = useState(null);\r\n    const history = useHistory();\r\n    useEffect(()=> {\r\n        auth.onAuthStateChanged((user)=>{\r\n            setUser(user);\r\n            setLoading(false);\r\n\r\n            if(user) history.push('/chats');\r\n        })\r\n    }, [user, history]);\r\n\r\n    const value = {user};\r\n\r\n    return(\r\n     <AuthContext.Provider value={value}>\r\n        {!loading && children}\r\n     </AuthContext.Provider>   \r\n    )\r\n}","import React,{useRef, useEffect, useState} from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { ChatEngine } from \"react-chat-engine\";\r\nimport { auth } from \"../firebase\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport axios from 'axios';\r\n\r\nconst Chats = () => {\r\n\r\nconst history = useHistory();\r\nconst {user} = useAuth();\r\nconst [loading, setLoading] = useState(true);\r\n\r\n\r\nconst handleLogout = async ()=>{\r\n    await auth.signOut();\r\n\r\n    history.push('/');\r\n}\r\n\r\nconst getFile = async (url)=>{\r\nconst response = await fetch(url);\r\nconst data = await response.blob();\r\n\r\nreturn new File([data], \"userPhoto.jpg\", {type: 'image/jpeg'});\r\n}\r\n\r\nuseEffect(()=>{\r\nif(!user)\r\n{\r\n    history.push('/');\r\n    return;\r\n}\r\naxios.get('https://api.chatengine.io/users/me', {\r\n    headers: {\r\n        \"project-id\": process.env.REACT_APP_CHAT_ENGINE_ID,\r\n        \"user-name\": user.email,\r\n        \"user-secret\": user.uid,\r\n    }\r\n}).then(()=>{\r\n    setLoading(false);\r\n\r\n}).catch(()=>{\r\n    let formdata = new FormData();\r\n    formdata.append('email',user.email);\r\n    formdata.append('username', user.email);\r\n    formdata.append('secret', user.uid);\r\n\r\n    getFile(user.photoURL)\r\n        .then((avatar) => {\r\n            formdata.append('avatar', avatar, avatar.name);\r\n            axios.post('https://api.chatengine.io/users', formdata\r\n            ,{headers:{\"private-key\": process.env.REACT_APP_CHAT_ENGINE_KEY}}\r\n            ).then(()=> setLoading(false))\r\n            .catch((error)=> console.log(error))\r\n        })\r\n})\r\n},[user,history]);\r\nif(!user || loading) return 'loading...';\r\n    return (\r\n        <div className=\"chats-page\">\r\n            <div className=\"nav-bar\">\r\n                <div className=\"logo-tab\">\r\n                    msgMe\r\n                </div>\r\n                <div onClick={handleLogout} className=\"logout-tab\">\r\n                    Logout\r\n                </div>\r\n            </div>\r\n            <ChatEngine \r\n                height = \"calc(100vh - 66px)\"\r\n                projectID = {process.env.REACT_APP_CHAT_ENGINE_ID}\r\n                userName = {user.email}\r\n                userSecret = {user.uid}\r\n\r\n            />\r\n          \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chats;","import React from \"react\";\r\nimport { GoogleOutlined } from \"@ant-design/icons\";\r\nimport \"firebase/app\";\r\nimport { auth } from '../firebase';\r\nimport firebase from \"firebase/app\";\r\n\r\nconst Login = () => {\r\n    return (\r\n        <div id=\"login-page\">\r\n            <div id=\"login-card\">\r\n                <h2>Welcome to msgMe!</h2>\r\n                <div className=\"login-button google\"\r\n                    onClick={() => auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())} >\r\n                    <GoogleOutlined /> Sign In with Google\r\n\r\n                </div>\r\n                <br /> <br />\r\n            \r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React from \"react\";\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { AuthProvider } from \"../contexts/AuthContext\";\n\nimport Chats from \"./Chats\";\nimport Login from \"./Login\";\n\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Avenir' }}>\n      <Router>\n        <AuthProvider>\n          <Switch>\n            <Route path=\"/chats\" component={Chats} />\n            <Route path=\"/\" component={Login} /> \n          </Switch>\n        </AuthProvider>\n      </Router>\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}